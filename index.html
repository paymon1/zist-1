<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>زیست دهم - چالش واژگان (نسخه یادگیری)</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;700;900&display=swap" rel="stylesheet">
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel for JSX compilation in browser -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        body {
            font-family: 'Vazirmatn', sans-serif;
            background-color: #f3f4f6;
            user-select: none;
        }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        .animate-shake { animation: shake 0.4s ease-in-out; }
        .animate-fade-in { animation: fadeIn 0.3s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        // --- DATA GENERATION UTILS ---
        let qIdCounter = 1000;
        const getNextId = () => qIdCounter++;

        const generateQuestions = (facts) => {
            const generated = [];
            facts.forEach(fact => {
                // True Question
                generated.push({
                    id: getNextId(),
                    text: fact.t,
                    isTrue: true,
                    explanation: fact.e,
                    difficulty: 'medium'
                });
                // False Question (Konkur Style Tricky)
                generated.push({
                    id: getNextId(),
                    text: fact.f,
                    isTrue: false,
                    explanation: fact.e,
                    difficulty: 'hard'
                });
            });
            return generated;
        };

        // --- CHAPTER CONTENT (Biology 1 - 10th Grade) ---
        
        // Chapter 1: دنیای زنده (The Living World)
        const ch1Facts = [
            { t: "پروانه‌های مونارک جایگاه خورشید را با نورون‌های عصبی خود تشخیص می‌دهند.", f: "پروانه‌های مونارک جایگاه خورشید را با گیرنده‌های شاخک خود تشخیص می‌دهند.", e: "طبق متن: یاخته‌های عصبی (نورون‌هایی) یافته‌اند که جایگاه خورشید را تشخیص می‌دهند." },
            { t: "هم‌ایستایی یعنی حفظ وضعیت درونی بدن در محدوده‌ای ثابت.", f: "هم‌ایستایی یعنی ثابت نگه داشتن مطلق محیط داخلی بدن.", e: "در محدوده‌ای ثابت (نوسان جزئی دارد)." },
            { t: "سطوح سازمان‌یابـی حیات با یاخته شروع و با زیست‌کره پایان می‌یابد.", f: "سطوح سازمان‌یابـی حیات با مولکول شروع و با زیست‌کره پایان می‌یابد.", e: "طبق متن کتاب، گستره حیات از یاخته شروع می‌شود." },
            { t: "جمعیت مجموعه‌ای از افراد یک گونه در زمان و مکانی خاص است.", f: "جمعیت مجموعه‌ای از افراد گونه‌های مختلف در مکانی خاص است.", e: "افراد یک گونه." },
            { t: "بوم‌سازگان شامل عوامل زنده و غیرزنده محیط است.", f: "بوم‌سازگان فقط شامل اجتماع‌های زیستی متفاوت است.", e: "عوامل غیرزنده هم هستند." },
            { t: "مولکول‌های زیستی اصلی شامل کربوهیدرات‌ها، لیپیدها، پروتئین‌ها و نوکلئیک اسیدها هستند.", f: "مولکول‌های زیستی اصلی شامل آب، نمک‌ها، پروتئین‌ها و لیپیدها هستند.", e: "آب و نمک معدنی‌اند." },
            { t: "مونوساکاریدها ساده‌ترین کربوهیدرات‌ها هستند.", f: "دی‌ساکاریدها ساده‌ترین کربوهیدرات‌ها هستند.", e: "مونوساکارید." },
            { t: "ساکارز دیساکاریدی از گلوکز و فروکتوز است.", f: "ساکارز دیساکاریدی از دو مولکول گلوکز است.", e: "مالتوز از دو گلوکز است." },
            { t: "سلولز در کاغذسازی و تولید پارچه کاربرد دارد.", f: "نشاسته در کاغذسازی و تولید پارچه کاربرد دارد.", e: "سلولز." },
            { t: "تری‌گلیسرید از یک گلیسرول و سه اسید چرب تشکیل شده است.", f: "تری‌گلیسرید از سه گلیسرول و یک اسید چرب تشکیل شده است.", e: "یک گلیسرول، سه اسید چرب." },
            { t: "فسفولیپیدها بخش اصلی غشای یاخته‌ای هستند.", f: "تری‌گلیسریدها بخش اصلی غشای یاخته‌ای هستند.", e: "فسفولیپید ساختار غشا است." },
            { t: "آنزیم‌ها انرژی فعال‌سازی واکنش را کاهش می‌دهند.", f: "آنزیم‌ها انرژی فعال‌سازی واکنش را افزایش می‌دهند.", e: "کاهش می‌دهند تا سرعت زیاد شود." },
            { t: "غشای یاخته نفوذپذیری انتخابی دارد.", f: "غشای یاخته نفوذپذیری کامل دارد.", e: "تراوایی نسبی (انتخابی)." },
            { t: "در انتشار ساده، مواد در جهت شیب غلظت حرکت می‌کنند.", f: "در انتشار ساده، مواد خلاف شیب غلظت حرکت می‌کنند.", e: "در جهت شیب (بدون انرژی)." },
            { t: "اسمز انتشار آب از غشایی با تراوایی نسبی است.", f: "اسمز انتشار مواد حل شده از غشایی با تراوایی نسبی است.", e: "انتشار آب." },
            { t: "فشار اسمزی با غلظت مواد حل شده رابطه مستقیم دارد.", f: "فشار اسمزی با غلظت آب رابطه مستقیم دارد.", e: "هرچه مواد حل شده بیشتر، فشار اسمزی بیشتر." },
            { t: "انتقال فعال با مصرف انرژی ATP همراه است.", f: "انتشار تسهیل‌شده با مصرف انرژی ATP همراه است.", e: "تسهیل‌شده غیرفعال است." },
            { t: "درون‌بری (آندوسیتوز) برای ورود ذرات بزرگ است.", f: "درون‌بری (آندوسیتوز) برای خروج ذرات بزرگ است.", e: "خروج می‌شود برون‌رانی (اگزوسیتوز)." },
            { t: "بافت پوششی دارای غشای پایه است.", f: "بافت پیوندی دارای غشای پایه است.", e: "غشای پایه زیر بافت پوششی است." },
            { t: "بافت پیوندی سست ماده زمینه‌ای شفاف و چسبنده دارد.", f: "بافت پیوندی متراکم ماده زمینه‌ای شفاف و چسبنده فراوان دارد.", e: "سست ماده زمینه‌ای زیاد، متراکم رشته زیاد." },
            { t: "بافت چربی نوعی بافت پیوندی است.", f: "بافت چربی نوعی بافت پوششی است.", e: "پیوندی است." },
            { t: "یاخته‌های ماهیچه اسکلتی چند هسته‌ای هستند.", f: "یاخته‌های ماهیچه اسکلتی تک هسته‌ای هستند.", e: "مخطط ارادی (چند هسته‌ای)." },
            { t: "ماهیچه صاف غیرارادی است.", f: "ماهیچه صاف ارادی است.", e: "غیرارادی." },
            { t: "یاخته‌های عصبی می‌توانند با یاخته‌های ماهیچه‌ای ارتباط داشته باشند.", f: "یاخته‌های عصبی فقط با یاخته‌های عصبی ارتباط دارند.", e: "عصب-عضله." },
            { t: "گلوکز و فروکتوز قندهای شش کربنه هستند.", f: "ریبوز قند شش کربنه است.", e: "ریبوز پنج کربنه است." },
            { t: "نشاسته پلی‌ساکارید ذخیره‌ای گیاهان است.", f: "گلیکوژن پلی‌ساکارید ذخیره‌ای گیاهان است.", e: "گلیکوژن جانوری." },
            { t: "کلسترول در ساختار غشای جانوری وجود دارد.", f: "کلسترول در ساختار غشای گیاهی وجود دارد.", e: "مخصوص جانوری." },
            { t: "ریشه پشتی نخاع حسی است.", f: "ریشه پشتی نخاع حرکتی است.", e: "پشتی حسی." }, // General biology fact kept
            { t: "رناتن (ریبوزوم) در ساخت پروتئین نقش دارد.", f: "دستگاه گلژی در ساخت پروتئین نقش دارد.", e: "گلژی بسته‌بندی و ترشح." },
            { t: "میتوکندری مسئول تولید انرژی است.", f: "لیزوزوم مسئول تولید انرژی است.", e: "لیزوزوم گوارش." },
            { t: "هستک در ساخت رناتن نقش دارد.", f: "هستک در ساخت لیپید نقش دارد.", e: "رناتن." },
            { t: "شبکه آندوپلاسمی زبر دارای رناتن است.", f: "شبکه آندوپلاسمی صاف دارای رناتن است.", e: "زبر." },
            { t: "غشای پایه شبکه‌ای از رشته‌های پروتئینی و گلیکوپروتئینی است.", f: "غشای پایه لایه‌ای از سلول‌های بنیادین است.", e: "سلول نیست، شبکه پروتئینی است." },
            { t: "بافت ماهیچه‌ای قلبی مخطط است.", f: "بافت ماهیچه‌ای قلبی صاف است.", e: "مخطط اما غیرارادی." },
            { t: "در بافت پیوندی متراکم رشته‌های کلاژن فراوان است.", f: "در بافت پیوندی سست رشته‌های کلاژن متراکم است.", e: "متراکم کلاژن زیاد دارد (مثل زردپی)." },
            { t: "خون نوعی بافت پیوندی است.", f: "خون نوعی بافت پوششی است.", e: "پیوندی سیال." },
            { t: "سدیم و پتاسیم در هم‌ایستایی نقش کلیدی دارند.", f: "فقط کلسیم در هم‌ایستایی نقش دارد.", e: "سدیم/پتاسیم اصلی‌اند." },
            { t: "ریبوز در ساختار RNA و ATP است.", f: "گلوکز در ساختار RNA است.", e: "قند نوکلئوتید ریبوز است." },
            { t: "آنزیم‌ها نوعی پروتئین هستند.", f: "همه آنزیم‌ها کربوهیدرات هستند.", e: "اغلب پروتئین." },
            { t: "پیوند بین آمینواسیدها پپتیدی نام دارد.", f: "پیوند بین آمینواسیدها گلیکوزیدی نام دارد.", e: "گلیکوزیدی قند." },
            { t: "لیپیدها در آب نامحلول‌اند.", f: "لیپیدها در آب محلول‌اند.", e: "آب‌گریز." },
            { t: "گلیسرول بخشی از ساختار تری‌گلیسرید است.", f: "گلیسرول بخشی از ساختار پروتئین است.", e: "چربی." },
            { t: "دیواره سلولی گیاهان سلولزی است.", f: "دیواره سلولی گیاهان گلیکوژنی است.", e: "سلولز." },
            { t: "واکوئل مرکزی در تنظیم اسمزی گیاه نقش دارد.", f: "واکوئل مرکزی در تنفس سلولی نقش دارد.", e: "تنفس میتوکندری." },
            { t: "هسته دارای دو غشا است.", f: "هسته دارای یک غشا است.", e: "دو غشا (پوشش هسته)." },
            { t: "سانتریول در تقسیم سلولی جانوری نقش دارد.", f: "سانتریول در فتوسنتز نقش دارد.", e: "تقسیم." },
            { t: "پمپ سدیم-پتاسیم با مصرف ATP کار می‌کند.", f: "پمپ سدیم-پتاسیم بدون انرژی کار می‌کند.", e: "انتقال فعال." },
            { t: "کانال‌های نشتی همیشه باز هستند.", f: "کانال‌های نشتی دریچه‌دار هستند.", e: "همیشه باز (نفوذپذیری پایه)." },
            { t: "سطوح سازمان‌یافی: یاخته، بافت، اندام، دستگاه.", f: "سطوح سازمان‌یافی: بافت، یاخته، دستگاه، اندام.", e: "ترتیب صحیح." },
            { t: "گونه به جاندارانی می‌گویند که می‌توانند زاده‌های زیستا و زایا تولید کنند.", f: "گونه به جاندارانی می‌گویند که فقط شبیه هم هستند.", e: "توانایی تولید مثل موفق شرط است." }
        ];

        // Chapter 2: گوارش و جذب مواد (Digestion)
        const ch2Facts = [
            { t: "لوله گوارش از دهان تا مخرج ادامه دارد.", f: "لوله گوارش شامل کبد و لوزالمعده نیز می‌شود.", e: "کبد و لوزالمعده اندام ضمیمه‌اند، نه جزو لوله." },
            { t: "بنداره (اسفنکتر) ماهیچه‌ای حلقوی است.", f: "بنداره (اسفنکتر) ماهیچه‌ای طولی است.", e: "حلقوی." },
            { t: "لایه بیرونی لوله گوارش در شکم بخشی از صفاق است.", f: "لایه بیرونی لوله گوارش در گردن بخشی از صفاق است.", e: "در شکم صفاق است، در مری (گردن) بافت پیوندی سست." },
            { t: "ماهیچه دهان و حلق و ابتدای مری مخطط است.", f: "ماهیچه تمام طول مری صاف است.", e: "ابتدای مری مخطط (ارادی) است." },
            { t: "شبکه‌های عصبی روده‌ای در زیرمخاط و لایه ماهیچه‌ای هستند.", f: "شبکه‌های عصبی روده‌ای فقط در لایه مخاطی هستند.", e: "بین لایه‌های ماهیچه‌ای و زیرمخاط." },
            { t: "حرکات کرمی باعث جلو راندن غذا می‌شوند.", f: "حرکات کرمی فقط غذا را مخلوط می‌کنند.", e: "نقش اصلی جلو راندن." },
            { t: "حرکات قطعه‌قطعه‌کننده بیشتر در روده باریک دیده می‌شود.", f: "حرکات قطعه‌قطعه‌کننده در مری دیده می‌شود.", e: "مری کرمی دارد." },
            { t: "آمیلاز بزاق نشاسته را گوارش می‌دهد.", f: "آمیلاز بزاق پروتئین را گوارش می‌دهد.", e: "نشاسته (قند)." },
            { t: "لیزوزیم باکتری‌های دهان را از بین می‌برد.", f: "لیزوزیم دندان را تجزیه می‌کند.", e: "ضد باکتری." },
            { t: "هنگام بلع، اپی‌گلوت راه نای را می‌بندد.", f: "هنگام بلع، زبان کوچک راه نای را می‌بندد.", e: "زبان کوچک راه بینی، اپی‌گلوت راه نای." },
            { t: "معده سه لایه ماهیچه (طولی، حلقوی، مورب) دارد.", f: "معده دو لایه ماهیچه (طولی، حلقوی) دارد.", e: "مورب اضافه دارد." },
            { t: "یاخته‌های کناری معده اسید و فاکتور داخلی ترشح می‌کنند.", f: "یاخته‌های اصلی معده اسید ترشح می‌کنند.", e: "اصلی پپسینوژن، کناری اسید." },
            { t: "فاکتور داخلی برای جذب ویتامین B12 لازم است.", f: "فاکتور داخلی برای جذب آهن لازم است.", e: "B12." },
            { t: "پپسینوژن با اثر اسید به پپسین تبدیل می‌شود.", f: "پپسینوژن خودبخود به پپسین تبدیل می‌شود.", e: "نیاز به اسید کلریدریک دارد." },
            { t: "کیموس معده اسیدی است.", f: "کیموس معده قلیایی است.", e: "به خاطر HCl اسیدی است." },
            { t: "سکرتین ترشح بیکربنات از لوزالمعده را تحریک می‌کند.", f: "سکرتین ترشح اسید معده را تحریک می‌کند.", e: "اولین هورمون، اثر بر پانکراس." },
            { t: "صفرا آنزیم ندارد.", f: "صفرا حاوی آنزیم‌های گوارشی چربی است.", e: "فقط املاح صفراوی (فیزیکی)." },
            { t: "جذب اصلی مواد در روده باریک انجام می‌شود.", f: "جذب اصلی مواد در معده انجام می‌شود.", e: "معده جذب کمی دارد (الکل/دارو)." },
            { t: "روده بزرگ پرز ندارد.", f: "روده بزرگ پرزهای فراوان دارد.", e: "پرز مخصوص روده باریک." },
            { t: "ویتامین K توسط باکتری‌های روده بزرگ تولید می‌شود.", f: "ویتامین K توسط کبد تولید می‌شود.", e: "باکتری‌های همزیست." },
            { t: "لیپوپروتئین LDL کلسترول را به بافت‌ها می‌برد (بد).", f: "لیپوپروتئین HDL کلسترول را به بافت‌ها می‌برد.", e: "HDL از بافت به کبد می‌برد (خوب)." },
            { t: "سیاهرگ باب خون لوله گوارش را به کبد می‌برد.", f: "سیاهرگ باب خون لوله گوارش را مستقیم به قلب می‌برد.", e: "اول کبد (تصفیه/ذخیره)." },
            { t: "گاسترین از معده ترشح شده و بر معده اثر می‌کند.", f: "گاسترین از روده ترشح شده و بر معده اثر می‌کند.", e: "مبدا و مقصد معده." },
            { t: "جذب چربی‌ها بیشتر به مویرگ لنفی است.", f: "جذب چربی‌ها مستقیماً به مویرگ خونی است.", e: "شیلومیکرون به لنف می‌رود." },
            { t: "پرزها سطح تماس را افزایش می‌دهند.", f: "پرزها حرکت غذا را کند می‌کنند.", e: "هدف افزایش جذب است." },
            { t: "ریبوفلاوین (B2) ویتامین محلول در آب است.", f: "ویتامین A محلول در آب است.", e: "A, D, E, K چربی." },
            { t: "پروتئازهای لوزالمعده به صورت غیرفعال ترشح می‌شوند.", f: "پروتئازهای لوزالمعده به صورت فعال ترشح می‌شوند.", e: "تا خود پانکراس را هضم نکنند." },
            { t: "شیره صفرا در کبد ساخته می‌شود.", f: "شیره صفرا در کیسه صفرا ساخته می‌شود.", e: "کبد می‌سازد، کیسه صفرا ذخیره می‌کند." },
            { t: "در نشخوارکنندگان، سیرابی محل تخمیر سلولز است.", f: "در نشخوارکنندگان، شیردان محل تخمیر سلولز است.", e: "سیرابی و نگاری (میکروب دارند)." },
            { t: "هزارلا آب غذا را می‌گیرد.", f: "هزارلا آنزیم گوارشی ترشح می‌کند.", e: "جذب آب." },
            { t: "شیردان معده واقعی نشخوارکننده است.", f: "سیرابی معده واقعی نشخوارکننده است.", e: "شیردان آنزیم دارد." },
            { t: "در پرندگان، سنگدان غذا را آسیاب می‌کند.", f: "در پرندگان، چینه دان غذا را آسیاب می‌کند.", e: "چینه‌دان ذخیره و نرم می‌کند." },
            { t: "پارامسی گوارش درون‌یاخته‌ای دارد.", f: "پارامسی گوارش برون‌یاخته‌ای دارد.", e: "واکوئل گوارشی." },
            { t: "هیدر گوارش برون و درون‌یاخته‌ای دارد.", f: "هیدر فقط گوارش درون‌یاخته‌ای دارد.", e: "ابتدا در حفره (برون)، سپس در سلول (درون)." },
            { t: "ملخ و پرندگان چینه‌دان دارند.", f: "انسان چینه‌دان دارد.", e: "انسان ندارد." },
            { t: "روده کور در گیاهخواران غیرنشخوارکننده بزرگ است.", f: "روده کور در گوشتخواران بزرگ است.", e: "محل تخمیر سلولز در اسب/خرگوش." },
            { t: "آمیلاز نشاسته را به دیساکارید تبدیل می‌کند.", f: "آمیلاز نشاسته را به گلوکز خالص تبدیل می‌کند.", e: "به مالتوز (دیساکارید) و قطعات کوچک." },
            { t: "لیپاز آنزیم تجزیه کننده چربی است.", f: "لیپاز آنزیم تجزیه کننده پروتئین است.", e: "لیپید." },
            { t: "موسین گلیکوپروتئینی است.", f: "موسین نوعی چربی است.", e: "قند-پروتئین." },
            { t: "پپسین در محیط اسیدی فعال است.", f: "پپسین در محیط قلیایی فعال است.", e: "PH پایین معده." },
            { t: "بیکربنات پانکراس اسید معده را در دوازدهه خنثی می‌کند.", f: "بیکربنات معده اسید را خنثی می‌کند.", e: "پانکراس به دوازدهه می‌ریزد." },
            { t: "کبد آمونیاک را به اوره تبدیل می‌کند.", f: "کلیه آمونیاک را به اوره تبدیل می‌کند.", e: "کبد (چرخه اوره)." },
            { t: "گلیکوژن در کبد ذخیره می‌شود.", f: "نشاسته در کبد ذخیره می‌شود.", e: "گلیکوژن (قند جانوری)." },
            { t: "آپاندیس ضایده‌ای در ابتدای روده بزرگ است.", f: "آپاندیس در انتهای روده بزرگ است.", e: "به روده کور متصل است." },
            { t: "تخلیه مدفوع ارادی و غیرارادی است.", f: "تخلیه مدفوع کاملاً غیرارادی است.", e: "بنداره خارجی ارادی است." },
            { t: "در ریفلاکس، بنداره انتهای مری شل است.", f: "در ریفلاکس، بنداره پیلور شل است.", e: "انتهای مری (کاردیا)." },
            { t: "زخم معده می‌تواند ناشی از هلیکوباکتر باشد.", f: "زخم معده فقط ناشی از استرس است.", e: "باکتری هلیکوباکتر پیلوری." },
            { t: "BMI شاخص توده بدنی است.", f: "BMI میزان قند خون است.", e: "Body Mass Index." },
            { t: "سلیاک حساسیت به گلوتن گندم است.", f: "سلیاک حساسیت به لاکتوز شیر است.", e: "گلوتن." },
            { t: "تراگذری یعنی عبور مواد از عرض غشا.", f: "تراگذری یعنی عبور از بین سلول‌ها.", e: "از عرض سلول (Transcellular)." }
        ];

        // Chapter 3: تبادلات گازی (Gas Exchange)
        const ch3Facts = [
            { t: "نایژک مبادله‌ای فاقد غضروف است.", f: "نایژک مبادله‌ای دارای حلقه‌های غضروفی کامل است.", e: "نایژک‌ها غضروف ندارند." },
            { t: "نای دارای غضروف‌های C شکل است.", f: "نای دارای غضروف‌های حلقوی کامل (O شکل) است.", e: "C شکل (پشت باز)." },
            { t: "حبابک‌ها محل اصلی تبادل گاز هستند.", f: "نایژک‌ها محل اصلی تبادل گاز هستند.", e: "حبابک (آلوئول)." },
            { t: "سورفاکتانت کشش سطحی حبابک را کم می‌کند.", f: "سورفاکتانت کشش سطحی حبابک را زیاد می‌کند.", e: "مانع روی هم خوابیدن حبابک می‌شود." },
            { t: "شش راست سه لوب دارد.", f: "شش راست دو لوب دارد.", e: "راست ۳، چپ ۲." },
            { t: "دیافراگم در دم منقبض و مسطح می‌شود.", f: "دیافراگم در دم استراحت می‌کند و گنبدی می‌شود.", e: "دم -> انقباض -> پایین رفتن." },
            { t: "بازدم معمولی فرآیندی غیرفعال (بدون انقباض) است.", f: "بازدم معمولی نیاز به انقباض ماهیچه دارد.", e: "برگشت کشسانی شش." },
            { t: "حجم جاری حدود ۵۰۰ میلی‌لیتر است.", f: "حجم جاری حدود ۲ لیتر است.", e: "۵۰۰ سی‌سی." },
            { t: "ظرفیت حیاتی مجموع جاری، ذخیره دمی و بازدمی است.", f: "ظرفیت حیاتی شامل هوای باقیمانده هم می‌شود.", e: "باقیمانده جزو حیاتی نیست." },
            { t: "هوای مرده در بخش هادی می‌ماند.", f: "هوای مرده در حبابک‌ها محبوس می‌شود.", e: "بخش هادی (نای/نایژه)." },
            { t: "اکسیژن عمدتاً متصل به هموگلوبین حمل می‌شود.", f: "اکسیژن عمدتاً محلول در پلاسما حمل می‌شود.", e: "۹۷٪ با هموگلوبین." },
            { t: "کربن دی‌اکسید عمدتاً به صورت یون بیکربنات حمل می‌شود.", f: "کربن دی‌اکسید عمدتاً متصل به هموگلوبین حمل می‌شود.", e: "۷۰٪ بیکربنات." },
            { t: "آنزیم کربنیک انیدراز در گویچه قرمز است.", f: "آنزیم کربنیک انیدراز در پلاسمای خون است.", e: "درون گلبول قرمز." },
            { t: "مرکز تنفس در بصل‌النخاع است.", f: "مرکز تنفس در مخچه است.", e: "ساقه مغز (بصل‌النخاع و پل)." },
            { t: "کاهش اکسیژن محرک گیرنده‌های سرخرگی است.", f: "افزایش اکسیژن محرک اصلی تنفس است.", e: "کمبود اکسیژن یا افزایش CO2." },
            { t: "پرندگان جریان هوای یک‌طرفه در شش دارند.", f: "پرندگان جریان هوای رفت و برگشتی (مثل انسان) دارند.", e: "نایژه‌های پارابرونش، یک‌طرفه." },
            { t: "ماهی‌ها با آبشش تنفس می‌کنند.", f: "ماهی‌ها شش‌های ساده دارند.", e: "آبشش." },
            { t: "در تنفس پوستی، پوست باید مرطوب باشد.", f: "در تنفس پوستی، پوست خشک و ضخیم است.", e: "مرطوب و نازک (کرم خاکی)." },
            { t: "حشرات سیستم نایی (تراکئال) دارند.", f: "حشرات همولنف را برای حمل گازها استفاده می‌کنند.", e: "لوله‌های نایی مستقیماً هوا را می‌برند." },
            { t: "پرده جنب دو لایه است.", f: "پرده جنب یک لایه ضخیم است.", e: "دو لایه با مایع جنب." },
            { t: "مایع جنب لغزندگی ایجاد می‌کند.", f: "مایع جنب چسبندگی شدید ایجاد می‌کند.", e: "کاهش اصطکاک." },
            { t: "سلول‌های نوع دوم حبابک سورفاکتانت می‌سازند.", f: "سلول‌های نوع اول حبابک سورفاکتانت می‌سازند.", e: "نوع اول سنگفرشی (تبادل)، نوع دوم ترشحی." },
            { t: "ماکروفاژها در حبابک‌ها حضور دارند.", f: "حبابک محیطی استریل و بدون سلول ایمنی است.", e: "گرد و غبار را می‌خورند." },
            { t: "تارهای صوتی در حنجره هستند.", f: "تارهای صوتی در نای هستند.", e: "حنجره." },
            { t: "در بینی هوا گرم و مرطوب می‌شود.", f: "در بینی هوا سرد و خشک می‌شود.", e: "آماده‌سازی هوا." },
            { t: "مخاط مژک‌دار ذرات را به سمت حلق می‌راند.", f: "مخاط مژک‌دار ذرات را به سمت شش می‌راند.", e: "به سمت بالا (حلق) برای بلع." },
            { t: "کربن مونوکسید محکم‌تر از اکسیژن به هموگلوبین می‌چسبد.", f: "کربن مونوکسید تمایل کمتری به هموگلوبین دارد.", e: "خفگی خاموش." },
            { t: "میوگلوبین در ماهیچه اکسیژن ذخیره می‌کند.", f: "میوگلوبین در کبد اکسیژن ذخیره می‌کند.", e: "ماهیچه." },
            { t: "افزایش CO2 خون را اسیدی می‌کند.", f: "افزایش CO2 خون را قلیایی می‌کند.", e: "تولید اسید کربنیک." },
            { t: "در ارتفاعات تعداد گویچه‌های قرمز زیاد می‌شود.", f: "در ارتفاعات تعداد گویچه‌های قرمز کم می‌شود.", e: "سازگاری با کمبود اکسیژن." },
            { t: "اریتروپویتین از کلیه ترشح می‌شود.", f: "اریتروپویتین از مغز ترشح می‌شود.", e: "کلیه (و کمی کبد)." },
            { t: "دوزیستان تنفس پوستی و ششی دارند.", f: "دوزیستان فقط با شش تنفس می‌کنند.", e: "پوست مکمل مهمی است." },
            { t: "پمپ فشار مثبت در قورباغه دیده می‌شود.", f: "پمپ فشار منفی در قورباغه دیده می‌شود.", e: "هوا را قورت می‌دهد (مثبت)، انسان مکش می‌کند (منفی)." },
            { t: "کیسه‌های هوادار پرندگان تبادل گاز نمی‌کنند.", f: "کیسه‌های هوادار پرندگان محل اصلی تبادل گازند.", e: "فقط ذخیره هوا؛ تبادل در شش." },
            { t: "جریان همسو در آبشش کارایی کمتری دارد.", f: "جریان ناهمسو (مخالف) در آبشش کارایی را کم می‌کند.", e: "جریان مخالف خون و آب جذب را حداکثر می‌کند." },
            { t: "نایژک انتهایی آخرین بخش هادی است.", f: "نایژک انتهایی اولین بخش مبادله‌ای است.", e: "انتهایی (هادی)، مبادله‌ای (تنفسی)." },
            { t: "غضروف تیروئید بزرگترین غضروف حنجره است.", f: "غضروف نای بزرگترین غضروف حنجره است.", e: "تیروئید (سیب آدم)." },
            { t: "بازدم عمیق نیاز به ماهیچه‌های شکم دارد.", f: "بازدم عمیق فقط با دیافراگم انجام می‌شود.", e: "شکم و بین‌دنده‌ای داخلی." },
            { t: "حجم ذخیره دمی حدود ۳۰۰۰ میلی‌لیتر است.", f: "حجم ذخیره دمی کمتر از حجم جاری است.", e: "ذخیره دمی زیاد است." },
            { t: "ظرفیت تام = حیاتی + باقیمانده.", f: "ظرفیت حیاتی = تام + باقیمانده.", e: "تام کل گنجایش است." },
            { t: "در آسم نایژک‌ها تنگ می‌شوند.", f: "در آسم نای گشاد می‌شود.", e: "انقباض عضله صاف نایژک." },
            { t: "سیگار مژک‌های تنفسی را از کار می‌اندازد.", f: "سیگار مژک‌ها را تقویت می‌کند.", e: "فلج مژک." },
            { t: "رنگ روشن خون به خاطر اکسی‌هموگلوبین است.", f: "رنگ تیره خون به خاطر اکسیژن زیاد است.", e: "اکسیژن دار = روشن." },
            { t: "بیکربنات در پلاسما حمل می‌شود.", f: "بیکربنات به هموگلوبین می‌چسبد.", e: "محلول در پلاسما." },
            { t: "هموگلوبین ۴ اتم آهن دارد.", f: "هموگلوبین ۱ اتم آهن دارد.", e: "۴ زنجیره، ۴ آهن." },
            { t: "تنفس نایدیسی نیاز به سیستم گردش خون ندارد.", f: "در حشرات خون اکسیژن را حمل می‌کند.", e: "مستقیماً به سلول می‌رسد." },
            { t: "شش‌های انسان تقارن کامل ندارند.", f: "شش چپ و راست کاملاً قرینه‌اند.", e: "چپ جای قلب دارد." },
            { t: "ماهیچه‌های بین‌دنده‌ای خارجی در دم نقش دارند.", f: "ماهیچه‌های بین‌دنده‌ای داخلی در دم نقش دارند.", e: "خارجی (دم)، داخلی (بازدم)." },
            { t: "فشار مایع جنب همیشه منفی است.", f: "فشار مایع جنب از جو بیشتر است.", e: "مکش برای باز نگه داشتن شش." },
            { t: "گیرنده‌های شیمیایی در قوس آئورت هستند.", f: "گیرنده‌های شیمیایی در سیاهرگ‌ها هستند.", e: "آئورت و کاروتید." }
        ];

        // Chapter 4: گردش مواد در بدن (Circulation)
        const ch4Facts = [
            { t: "قلب انسان چهار حفره‌ای است.", f: "قلب انسان سه حفره‌ای است.", e: "2 دهلیز، 2 بطن." },
            { t: "گردش خون ششی از بطن راست شروع می‌شود.", f: "گردش خون ششی از بطن چپ شروع می‌شود.", e: "راست به شش، چپ به بدن." },
            { t: "دریچه دولختی (میترال) بین دهلیز و بطن چپ است.", f: "دریچه دولختی بین دهلیز و بطن راست است.", e: "راست سه لخت، چپ دو لخت." },
            { t: "سرخرگ‌ها خون را از قلب دور می‌کنند.", f: "سرخرگ‌ها همیشه خون روشن دارند.", e: "تعریف سرخرگ دور کردن است (سرخرگ ششی تیره است)." },
            { t: "سیاهرگ‌های ششی خون روشن دارند.", f: "سیاهرگ‌های ششی خون تیره دارند.", e: "از شش برمی‌گردند (اکسیژن‌دار)." },
            { t: "گره سینوسی-دهلیزی ضربان‌ساز است.", f: "گره دهلیزی-بطنی ضربان‌ساز اصلی است.", e: "SA node." },
            { t: "گره AV تاخیر در هدایت ایجاد می‌کند.", f: "گره AV سرعت هدایت را زیاد می‌کند.", e: "تاخیر برای پر شدن بطن." },
            { t: "صدای اول قلب بسته شدن دریچه‌های دهلیزی-بطنی است.", f: "صدای اول قلب بسته شدن دریچه‌های سینی است.", e: "بستن میترال/سه لختی (پوم)." },
            { t: "صدای دوم قلب بسته شدن دریچه‌های سینی است.", f: "صدای دوم قلب باز شدن دریچه‌های سینی است.", e: "بستن سینی (تاک)." },
            { t: "دیواره بطن چپ ضخیم‌تر است.", f: "دیواره بطن راست ضخیم‌تر است.", e: "پمپاژ به کل بدن." },
            { t: "رگ‌های کرونر به خود قلب خون می‌دهند.", f: "رگ‌های کرونر به شش‌ها خون می‌دهند.", e: "تغذیه قلب." },
            { t: "لایه داخلی رگ‌ها بافت پوششی سنگفرشی است.", f: "لایه داخلی رگ‌ها بافت ماهیچه‌ای است.", e: "اندوتلیوم." },
            { t: "سرخرگ‌ها دیواره ماهیچه‌ای ضخیم‌تری دارند.", f: "سیاهرگ‌ها دیواره ماهیچه‌ای ضخیم‌تری دارند.", e: "تحمل فشار بالا." },
            { t: "سیاهرگ‌ها دریچه لانه کبوتری دارند.", f: "سرخرگ‌ها دریچه لانه کبوتری دارند.", e: "کمک به بازگشت خون." },
            { t: "مویرگ‌ها فقط یک لایه سلول دارند.", f: "مویرگ‌ها لایه ماهیچه‌ای دارند.", e: "فقط اندوتلیوم." },
            { t: "فشار خون در سرخرگ‌ها بیشتر است.", f: "فشار خون در سیاهرگ‌ها بیشتر است.", e: "پمپ قلب." },
            { t: "بنداره مویرگی جریان خون مویرگ را تنظیم می‌کند.", f: "دریچه لانه کبوتری جریان مویرگ را تنظیم می‌کند.", e: "اسفنکتر پیش‌مویرگی." },
            { t: "گویچه قرمز هسته ندارد.", f: "گویچه قرمز هسته بزرگی دارد.", e: "در پستانداران بالغ." },
            { t: "گویچه قرمز هموگلوبین دارد.", f: "گویچه سفید هموگلوبین دارد.", e: "حمل اکسیژن." },
            { t: "عمر گلبول قرمز حدود ۱۲۰ روز است.", f: "عمر گلبول قرمز یک هفته است.", e: "۴ ماه." },
            { t: "اریتروپویتین تولید گلبول قرمز را زیاد می‌کند.", f: "اریتروپویتین تولید گلبول سفید را زیاد می‌کند.", e: "اریترو = قرمز." },
            { t: "گلبول‌های سفید دفاعی هستند.", f: "گلبول‌های سفید حمل گاز می‌کنند.", e: "ایمنی." },
            { t: "پلاکت‌ها در انعقاد خون نقش دارند.", f: "پلاکت‌ها در حمل اکسیژن نقش دارند.", e: "لخته شدن." },
            { t: "مگاکاریوسیت پلاکت تولید می‌کند.", f: "لنفوسیت پلاکت تولید می‌کند.", e: "قطعه قطعه شدن مگاکاریوسیت." },
            { t: "فیبرینوژن پروتئین انعقادی پلاسما است.", f: "آلبومین پروتئین انعقادی پلاسما است.", e: "آلبومین فشار اسمزی." },
            { t: "آلبومین فشار اسمزی خون را حفظ می‌کند.", f: "آلبومین ایمنی بدن را تامین می‌کند.", e: "فشار اسمزی." },
            { t: "لنف مایعی شبیه پلاسما است.", f: "لنف حاوی گلبول قرمز است.", e: "گلبول قرمز ندارد." },
            { t: "ماهی گردش خون ساده دارد.", f: "ماهی گردش خون مضاعف دارد.", e: "یک بار از قلب رد می‌شود." },
            { t: "قلب ماهی دو حفره‌ای است.", f: "قلب ماهی سه حفره‌ای است.", e: "یک دهلیز، یک بطن." },
            { t: "دوزیستان قلب سه حفره‌ای دارند.", f: "دوزیستان قلب چهار حفره‌ای دارند.", e: "دو دهلیز، یک بطن." },
            { t: "در دوزیستان خون تیره و روشن مخلوط می‌شود.", f: "در پرندگان خون تیره و روشن مخلوط می‌شود.", e: "بطن مشترک دوزیست." },
            { t: "حشرات گردش خون باز دارند.", f: "کرم خاکی گردش خون باز دارد.", e: "حشرات باز، کرم خاکی بسته." },
            { t: "همولنف در گردش خون باز وجود دارد.", f: "همولنف در گردش خون بسته وجود دارد.", e: "خون و مایع میان‌بافتی یکی است." },
            { t: "الکتروکاردیوگرام فعالیت الکتریکی قلب است.", f: "الکتروکاردیوگرام صدای قلب است.", e: "نوار قلب (برق)." },
            { t: "موج P انقباض دهلیز است.", f: "موج P انقباض بطن است.", e: "پیام دهلیز." },
            { t: "موج QRS انقباض بطن است.", f: "موج QRS استراحت قلب است.", e: "پیام بطن." },
            { t: "موج T استراحت بطن است.", f: "موج T انقباض دهلیز است.", e: "بازپولاریزاسیون بطن." },
            { t: "حجم ضربه‌ای خون خروجی در هر ضربان است.", f: "حجم ضربه‌ای خون خروجی در یک دقیقه است.", e: "دقیقه = برون‌ده." },
            { t: "برون‌ده قلبی = حجم ضربه‌ای × تعداد ضربان.", f: "برون‌ده قلبی = حجم ضربه‌ای + تعداد ضربان.", e: "ضرب." },
            { t: "مرکز قلبی در بصل‌النخاع است.", f: "مرکز قلبی در نخاع است.", e: "بصل‌النخاع." },
            { t: "اعصاب سمپاتیک ضربان را زیاد می‌کنند.", f: "اعصاب پاراسمپاتیک ضربان را زیاد می‌کنند.", e: "پاراسمپاتیک کم می‌کند." },
            { t: "فشار خون طبیعی حدود ۱۲۰/۸۰ است.", f: "فشار خون طبیعی حدود ۸۰/۱۲۰ است.", e: "سیستول/دیاستول." },
            { t: "بیشترین فشار خون در آئورت است.", f: "بیشترین فشار خون در سیاهرگ‌های بزرگ است.", e: "خروجی قلب." },
            { t: "مقاومت عروقی با کاهش قطر زیاد می‌شود.", f: "مقاومت عروقی با افزایش قطر زیاد می‌شود.", e: "تنگ شدن = مقاومت بیشتر." },
            { t: "ادم ناشی از تجمع مایع میان‌بافتی است.", f: "ادم ناشی از کمبود مایع میان‌بافتی است.", e: "خیز (ورم)." },
            { t: "کمبود پروتئین پلاسما باعث ادم می‌شود.", f: "افزایش پروتئین پلاسما باعث ادم می‌شود.", e: "کاهش فشار اسمزی -> نشت آب." },
            { t: "لنفوسیت‌ها در گره‌های لنفی هستند.", f: "گلبول‌های قرمز در گره‌های لنفی هستند.", e: "دفاع." },
            { t: "طحال اندام لنفی است.", f: "کبد اندام لنفی اصلی است.", e: "طحال خون را تصفیه می‌کند (گورستان RBC)." },
            { t: "در گردش خون باز مویرگ وجود ندارد.", f: "در گردش خون بسته مویرگ وجود ندارد.", e: "باز انتهای باز دارد." },
            { t: "قلب کرم خاکی لوله‌ای است.", f: "قلب ملخ ۴ حفره‌ای است.", e: "کرم خاکی کمان‌های رگی دارد." },
            { t: "پلاسمای خون زرد رنگ است.", f: "پلاسمای خون قرمز رنگ است.", e: "سلول‌ها قرمزند." }
        ];

        // Chapter 5: تنظیم اسمزی و دفع (Osmoregulation)
        const ch5Facts = [
            { t: "کلیه مسئول تنظیم اسمزی است.", f: "کبد مسئول اصلی تنظیم اسمزی است.", e: "دفع آب و یون." },
            { t: "نفرون واحد عملکردی کلیه است.", f: "نورون واحد عملکردی کلیه است.", e: "نورون عصبی است." },
            { t: "کپسول بومن کلافک را احاطه کرده.", f: "لوله هنله کلافک را احاطه کرده.", e: "بومن ابتدای نفرون." },
            { t: "کلافک (گلومرول) شبکه مویرگی است.", f: "کلافک بخشی از لوله ادراری است.", e: "مویرگ." },
            { t: "تراوش در کپسول بومن رخ می‌دهد.", f: "تراوش در لوله هنله رخ می‌دهد.", e: "اولین مرحله." },
            { t: "تراوش غیرانتخابی (بر اساس اندازه) است.", f: "تراوش کاملاً انتخابی است.", e: "هرچه ریز باشد رد می‌شود." },
            { t: "پروتئین‌های درشت نباید تراوش شوند.", f: "پروتئین‌ها به راحتی تراوش می‌شوند.", e: "نشان بیماری است." },
            { t: "بازجذب مواد مفید را به خون برمی‌گرداند.", f: "بازجذب مواد دفعی را به ادرار می‌ریزد.", e: "بازگشت به بدن." },
            { t: "بیشترین بازجذب در لوله پیچ‌خورده نزدیک است.", f: "بیشترین بازجذب در لوله هنله است.", e: "نزدیک (PCT)." },
            { t: "ترشح حرکت مواد از خون به نفرون است.", f: "ترشح حرکت مواد از نفرون به خون است.", e: "دفع فعال." },
            { t: "پتاسیم و هیدروژن ترشح می‌شوند.", f: "گلوکز ترشح می‌شود.", e: "گلوکز بازجذب می‌شود." },
            { t: "لوله هنله U شکل است.", f: "لوله هنله فنری شکل است.", e: "U." },
            { t: "قوس هنله در ایجاد ادرار غلیظ نقش دارد.", f: "کپسول بومن در ایجاد ادرار غلیظ نقش دارد.", e: "شیب غلظت." },
            { t: "هورمون ADH بازجذب آب را زیاد می‌کند.", f: "هورمون ADH ادرار را زیاد می‌کند.", e: "ضد ادراری." },
            { t: "کمبود ADH باعث دیابت بی‌مزه می‌شود.", f: "کمبود انسولین باعث دیابت بی‌مزه می‌شود.", e: "بی‌مزه (دفع آب زیاد)." },
            { t: "مثانه ادرار را ذخیره می‌کند.", f: "لگنچه ادرار را ذخیره می‌کند.", e: "لگنچه قیف است." },
            { t: "بنداره داخلی میزراه صاف (غیرارادی) است.", f: "بنداره داخلی میزراه مخطط (ارادی) است.", e: "غیرارادی." },
            { t: "بنداره خارجی میزراه مخطط (ارادی) است.", f: "بنداره خارجی میزراه صاف (غیرارادی) است.", e: "ارادی." },
            { t: "انعکاس تخلیه ادرار نخاعی است.", f: "تخلیه ادرار فقط توسط مغز کنترل می‌شود.", e: "نخاعی با کنترل مغز." },
            { t: "آمونیاک بسیار سمی است.", f: "اوره از آمونیاک سمی‌تر است.", e: "آمونیاک سمی‌ترین." },
            { t: "آبزیان آمونیاک دفع می‌کنند.", f: "آبزیان اسید اوریک دفع می‌کنند.", e: "رقیق‌سازی در آب." },
            { t: "پستانداران اوره دفع می‌کنند.", f: "پستانداران آمونیاک خالص دفع می‌کنند.", e: "کبد آمونیاک را اوره می‌کند." },
            { t: "حشرات و پرندگان اسید اوریک دفع می‌کنند.", f: "حشرات اوره دفع می‌کنند.", e: "اسید اوریک (کم‌آب)." },
            { t: "اسید اوریک رسوب می‌کند (دفع جامد).", f: "اسید اوریک بسیار محلول در آب است.", e: "کریستال سفید." },
            { t: "کرم پهن (پلاناریا) پروتونفریدی دارد.", f: "کرم پهن متانفریدی دارد.", e: "سلول‌های شعله‌ای." },
            { t: "سلول‌های شعله‌ای مژک دارند.", f: "سلول‌های شعله‌ای تاژک دارند.", e: "مژک (حرکت مایع)." },
            { t: "کرم خاکی متانفریدی دارد.", f: "کرم خاکی لوله مالپیگی دارد.", e: "متانفریدی." },
            { t: "حشرات لوله مالپیگی دارند.", f: "حشرات کلیه دارند.", e: "مالپیگی به روده می‌ریزد." },
            { t: "لوله مالپیگی آب را بازجذب نمی‌کند.", f: "در سامانه مالپیگی، آب در روده بازجذب می‌شود.", e: "بازجذب در روده." },
            { t: "مهره‌داران کلیه دارند.", f: "مهره‌داران نفریدی دارند.", e: "کلیه." },
            { t: "ماهیان آب شیرین آب زیادی جذب می‌کنند.", f: "ماهیان آب شیرین آب را از دست می‌دهند.", e: "محیط رقیق است -> ورود آب." },
            { t: "ماهیان آب شور ادرار غلیظ دارند.", f: "ماهیان آب شور ادرار رقیق و زیاد دارند.", e: "حفظ آب." },
            { t: "غدد نمکی در پرندگان دریایی نمک را دفع می‌کند.", f: "غدد نمکی نمک را جذب می‌کند.", e: "دفع نمک اضافی." },
            { t: "سرخرگ آوران ضخیم‌تر از وابران است.", f: "سرخرگ وابران ضخیم‌تر از آوران است.", e: "برای ایجاد فشار تراوش." },
            { t: "پودوسیت‌ها دیواره داخلی کپسول بومن هستند.", f: "پودوسیت‌ها در لوله هنله هستند.", e: "پادرا (روی گلومرول)." },
            { t: "گلومرول بین دو سرخرگ است.", f: "گلومرول بین یک سرخرگ و یک سیاهرگ است.", e: "شبکه مویرگی خاص." },
            { t: "کلیه اریتروپویتین می‌سازد.", f: "کلیه هورمون رشد می‌سازد.", e: "خونسازی." },
            { t: "کلیه ویتامین D را فعال می‌کند.", f: "کلیه ویتامین C را می‌سازد.", e: "فعال‌سازی نهایی D." },
            { t: "سنگ کلیه می‌تواند کلسیمی باشد.", f: "سنگ کلیه از جنس چربی است.", e: "اگزالات کلسیم." },
            { t: "نقرس رسوب اسید اوریک در مفاصل است.", f: "نقرس رسوب اوره در مفاصل است.", e: "اسید اوریک." },
            { t: "میزنای ادرار را به مثانه می‌برد.", f: "میزراه ادرار را به مثانه می‌برد.", e: "میزنای (Halter) -> مثانه -> میزراه (Urethra)." },
            { t: "چین‌خوردگی مثانه هنگام پر بودن صاف می‌شود.", f: "چین‌خوردگی مثانه دائمی است.", e: "باز می‌شود." },
            { t: "هرم‌های کلیه در بخش مرکزی‌اند.", f: "هرم‌های کلیه در بخش قشری‌اند.", e: "مرکزی (مدولا)." },
            { t: "لگنچه ادرار را جمع می‌کند.", f: "لگنچه خون را تصفیه می‌کند.", e: "محل خروج ادرار." },
            { t: "تراوش به انرژی ATP نیاز ندارد.", f: "تراوش انتقال فعال است.", e: "فشار خون (قلب) محرک است." },
            { t: "بازجذب گلوکز در فرد سالم کامل است.", f: "همیشه مقداری گلوکز در ادرار فرد سالم هست.", e: "نباید باشد." },
            { t: "وجود گلبول قرمز در ادرار غیرطبیعی است.", f: "وجود گلبول قرمز در ادرار نشانه سلامتی است.", e: "هماچوری." },
            { t: "دیالیز جایگزین کار کلیه است.", f: "دیالیز کبد را تصفیه می‌کند.", e: "کلیه مصنوعی." },
            { t: "اسمز آب را به سمت غلظت بالا می‌کشد.", f: "اسمز آب را به سمت آب خالص می‌برد.", e: "جذب آب توسط مواد." },
            { t: "بیشترین ماده دفعی آلی ادرار اوره است.", f: "بیشترین ماده دفعی آلی ادرار پروتئین است.", e: "اوره." }
        ];

        // Chapter 6: از یاخته تا گیاه (From Cell to Plant)
        const ch6Facts = [
            { t: "دیواره نخستین گیاه قابلیت گسترش دارد.", f: "دیواره نخستین گیاه چوبی و سخت است.", e: "جوان و قابل رشد." },
            { t: "تیغه میانی بین دو سلول گیاهی است.", f: "تیغه میانی درون واکوئل است.", e: "چسب بین سلولی (پکتین)." },
            { t: "دیواره پسین بعد از رشد سلول ساخته می‌شود.", f: "دیواره پسین قبل از دیواره نخستین ساخته می‌شود.", e: "داخلی‌تر و دیرتر." },
            { t: "پلاسمودسم کانال سیتوپلاسمی است.", f: "پلاسمودسم کانال غشایی بسته است.", e: "ارتباط سلول‌ها." },
            { t: "لان ناحیه نازک دیواره است.", f: "لان سوراخ کامل دیواره است.", e: "نازک شده (پلاسمودسم دارد)." },
            { t: "واکوئل مرکزی فشار تورژسانس ایجاد می‌کند.", f: "میتوکندری فشار تورژسانس ایجاد می‌کند.", e: "جذب آب واکوئل." },
            { t: "تورژسانس یعنی آماس (پرآبی).", f: "تورژسانس یعنی پژمردگی.", e: "سلول سفت می‌شود." },
            { t: "پلاسمولیز یعنی جدا شدن غشا از دیواره.", f: "پلاسمولیز یعنی ترکیدن سلول گیاهی.", e: "جمع شدن در آب نمک." },
            { t: "سبزدیسه (کلروپلاست) فتوسنتز می‌کند.", f: "سبزدیسه تنفس سلولی می‌کند.", e: "فتوسنتز." },
            { t: "رنگ‌دیسه (کروموپلاست) رنگیزه غیر سبز دارد.", f: "رنگ‌دیسه نشاسته ذخیره می‌کند.", e: "کاروتن، لیکوپن." },
            { t: "نشادیسه (آمیلوپلاست) نشاسته ذخیره می‌کند.", f: "نشادیسه فتوسنتز می‌کند.", e: "ذخیره در سیب‌زمینی." },
            { t: "دیسه‌ها می‌توانند به هم تبدیل شوند.", f: "دیسه‌ها غیرقابل تغییرند.", e: "سبز به قرمز (رسیدن میوه)." },
            { t: "سامانه بافت پوششی روپوست را می‌سازد.", f: "سامانه بافت پوششی آوندها را می‌سازد.", e: "محافظت." },
            { t: "پوستک (کوتیکول) لایه مومی روی روپوست است.", f: "پوستک لایه سلولی زنده است.", e: "ترشحات مومی (غیر زنده)." },
            { t: "نگهبان روزنه کلروپلاست دارد.", f: "سلول‌های روپوست (معمولی) کلروپلاست دارند.", e: "فقط نگهبان دارد." },
            { t: "کرک‌ها تبخیر آب را کم می‌کنند.", f: "کرک‌ها تبخیر آب را زیاد می‌کنند.", e: "سایه و رطوبت." },
            { t: "پارانشیم دیواره نازک دارد.", f: "پارانشیم دیواره چوبی ضخیم دارد.", e: "فعال و زنده." },
            { t: "کلانشیم دیواره نخستین ضخیم دارد.", f: "کلانشیم دیواره پسین چوبی دارد.", e: "زنده و منعطف (کرفس)." },
            { t: "اسکلرانشیم دیواره پسین چوبی دارد.", f: "اسکلرانشیم زنده و فعال است.", e: "مرده و مستحکم." },
            { t: "فیبر سلول دراز اسکلرانشیمی است.", f: "فیبر سلول پارانشیمی است.", e: "دراز و محکم." },
            { t: "اسکلرئید (سلول سنگی) کوتاه است.", f: "اسکلرئید دراز و رشته‌ای است.", e: "در گلابی." },
            { t: "آوند چوبی آب را منتقل می‌کند.", f: "آوند چوبی مواد غذایی را منتقل می‌کند.", e: "شیره خام." },
            { t: "تراکئیدها آوند چوبی باریک‌اند.", f: "تراکئیدها آوند آبکشی‌اند.", e: "چوبی." },
            { t: "عناصر آوندی لوله باز و پیوسته دارند.", f: "عناصر آوندی دیواره عرضی بسته دارند.", e: "گشاد و باز." },
            { t: "آوند آبکش زنده است.", f: "آوند آبکش مرده است.", e: "سیتوپلاسم دارد (هسته ندارد)." },
            { t: "سلول همراه به آوند آبکش کمک می‌کند.", f: "سلول همراه فتوسنتز می‌کند.", e: "متابولیسم آبکش را انجام می‌دهد." },
            { t: "صفحه آبکشی دیواره عرضی سوراخ‌دار است.", f: "صفحه آبکشی در آوند چوبی است.", e: "آبکش." },
            { t: "مریستم نخستین مسئول رشد طولی است.", f: "مریستم نخستین مسئول رشد قطری است.", e: "نوک ریشه و ساقه." },
            { t: "کلاهک ریشه از مریستم محافظت می‌کند.", f: "کلاهک ریشه آب جذب می‌کند.", e: "حفاظت مکانیکی." },
            { t: "کامبیوم چوب-آبکش مسئول رشد قطری است.", f: "کامبیوم چوب-آبکش مسئول رشد طولی است.", e: "مریستم پسین." },
            { t: "چوب پنبه بافت مرده محافظتی است.", f: "چوب پنبه فتوسنتز می‌کند.", e: "جایگزین روپوست در پیری." },
            { t: "عدسک برای تبادل گاز در ساقه چوبی است.", f: "عدسک برای جذب آب است.", e: "سوراخ در چوب پنبه." },
            { t: "ریشه تک‌لپه مغز دارد.", f: "ریشه دولپه مغز دارد.", e: "تک‌لپه (حلقه و مغز)، دولپه (ستاره)." },
            { t: "ساقه دولپه حلقوی است.", f: "ساقه تک‌لپه حلقوی است.", e: "تک‌لپه پراکنده." },
            { t: "پوست درخت شامل پیراپوست و آبکش پسین است.", f: "پوست درخت شامل چوب است.", e: "چوب زیر پوست است." },
            { t: "کامبیوم چوب‌پنبه‌ساز پیراپوست را می‌سازد.", f: "کامبیوم آوندساز پیراپوست را می‌سازد.", e: "چوب‌پنبه." },
            { t: "آنچه ما چوب می‌نامیم آوند چوبی پسین است.", f: "چوب درخت آوند آبکش است.", e: "چوب = Xylem." },
            { t: "حلقه‌های سالانه سن درخت را نشان می‌دهند.", f: "حلقه‌های سالانه سن جانوران را نشان می‌دهند.", e: "رشد بهاره و پاییزه." },
            { t: "روزنه آبی در تعریق نقش دارد.", f: "روزنه آبی در تعرق نقش دارد.", e: "تعریق (قطره آب)." },
            { t: "روزنه‌های هوایی در سطح زیرین برگ بیشترند.", f: "روزنه‌های هوایی در سطح بالایی برگ بیشترند.", e: "برای کاهش تبخیر." },
            { t: "سلول‌های میانبرگ پارانشیمی‌اند.", f: "سلول‌های میانبرگ اسکلرانشیمی‌اند.", e: "فتوسنتز." },
            { t: "رگبرگ شامل دسته‌های آوندی است.", f: "رگبرگ فقط فیبر است.", e: "آوند." },
            { t: "روپوست ریشه تار کشنده دارد.", f: "روپوست ریشه پوستک ضخیم دارد.", e: "پوستک مانع جذب است." },
            { t: "بافت زمینه در ساقه پوست و مغز را می‌سازد.", f: "بافت زمینه فقط روپوست است.", e: "پوست و مغز." },
            { t: "مریستم‌های پسین استوانه‌ای هستند.", f: "مریستم‌های پسین نوکی هستند.", e: "کامبیوم." },
            { t: "رشد پسین در گیاهان علفی تک‌لپه نداریم.", f: "همه گیاهان رشد پسین دارند.", e: "تک‌لپه و علفی‌ها ندارند." },
            { t: "سلول‌های نگهبان روزنه لوبیایی شکل‌اند.", f: "سلول‌های نگهبان روزنه مستطیلی‌اند.", e: "لوبیایی." },
            { t: "گیاهان آبزی آئرانشیم (پارانشیم هوادار) دارند.", f: "گیاهان آبزی چوب فراوان دارند.", e: "شناوری." },
            { t: "شیره واکوئلی می‌تواند رنگی باشد.", f: "واکوئل همیشه بی‌رنگ است.", e: "آنتوسیانین." },
            { t: "آنزیم‌ها در لیزوزوم یا واکوئل گوارشی‌اند.", f: "ریبوزوم آنزیم گوارشی دارد.", e: "واکوئل در گیاه." }
        ];

        // Chapter 7: جذب و انتقال مواد در گیاهان (Absorption and Transport)
        const ch7Facts = [
            { t: "نیتروژن برای ساخت پروتئین و DNA لازم است.", f: "نیتروژن برای ساخت قند لازم است.", e: "آمینواسید و نوکلئوتید." },
            { t: "گیاهان نیتروژن را به صورت نیترات یا آمونیوم جذب می‌کنند.", f: "گیاهان نیتروژن را به صورت گاز N2 جذب می‌کنند.", e: "تثبیت نشده را نمی‌توانند." },
            { t: "باکتری‌های ریزوبیوم تثبیت نیتروژن می‌کنند.", f: "باکتری‌های ریزوبیوم فتوسنتز می‌کنند.", e: "همزیست حبوبات." },
            { t: "گرهک ریشه محل زندگی ریزوبیوم است.", f: "گرهک ریشه غده سرطانی است.", e: "همزیستی." },
            { t: "میکوریزا همزیستی قارچ و ریشه است.", f: "میکوریزا بیماری قارچی ریشه است.", e: "افزایش جذب فسفر." },
            { t: "قارچ در میکوریزا فسفر جذب می‌کند.", f: "قارچ در میکوریزا قند می‌سازد.", e: "قند را از گیاه می‌گیرد." },
            { t: "گیاه آزولا با سیانوباکتری همزیستی دارد.", f: "گیاه آزولا با قارچ همزیستی دارد.", e: "سیانوباکتری (تثبیت N)." },
            { t: "تار کشنده سطح جذب را زیاد می‌کند.", f: "تار کشنده وظیفه استحکام دارد.", e: "جذب آب." },
            { t: "مسیر آپوپلاستی از دیواره‌ها می‌گذرد.", f: "مسیر آپوپلاستی از سیتوپلاسم می‌گذرد.", e: "دیواره و فضای بین سلولی." },
            { t: "مسیر سیمپلاستی از پلاسمودسم‌ها می‌گذرد.", f: "مسیر سیمپلاستی از دیواره می‌گذرد.", e: "سیتوپلاسم." },
            { t: "نوار کاسپاری در درون‌پوست (آندودرم) است.", f: "نوار کاسپاری در روپوست است.", e: "کنترل ورود مواد." },
            { t: "نوار کاسپاری مسیر آپوپلاستی را می‌بندد.", f: "نوار کاسپاری مسیر سیمپلاستی را می‌بندد.", e: "مجبور به عبور از غشا." },
            { t: "فشار ریشه‌ای باعث تعریق می‌شود.", f: "فشار ریشه‌ای عامل اصلی صعود آب در درختان بلند است.", e: "فشار ریشه‌ای ضعیف است." },
            { t: "تعریق خروج آب مایع است.", f: "تعریق خروج بخار آب است.", e: "قطره (روزنه آبی)." },
            { t: "تعرق خروج بخار آب از روزنه است.", f: "تعرق خروج آب مایع است.", e: "بخار." },
            { t: "کشش تعرقی عامل اصلی حرکت شیره خام است.", f: "فشار ریشه‌ای عامل اصلی حرکت شیره خام است.", e: "مکش از بالا." },
            { t: "نظریه هم‌چسبی-کشش مربوط به آوند چوبی است.", f: "نظریه هم‌چسبی-کشش مربوط به آوند آبکش است.", e: "ستون آب." },
            { t: "جریان توده‌ای در آوند آبکش فشاری است.", f: "جریان توده‌ای در آوند آبکش مکشی است.", e: "فشار اسمزی (منبع به مصرف)." },
            { t: "بارگیری آبکشی انرژی مصرف می‌کند.", f: "بارگیری آبکشی همیشه غیرفعال است.", e: "انتقال فعال قند." },
            { t: "محل منبع قند تولید می‌کند (مثل برگ).", f: "محل منبع قند مصرف می‌کند.", e: "تولید کننده." },
            { t: "محل مصرف قند ذخیره یا مصرف می‌کند (مثل ریشه/میوه).", f: "محل مصرف قند تولید می‌کند.", e: "مصرف کننده." },
            { t: "آب از چوب به آبکش می‌رود (در منبع).", f: "آب از آبکش به چوب می‌رود (در منبع).", e: "افزایش فشار." },
            { t: "شته‌ها برای بررسی شیره پرورده استفاده می‌شوند.", f: "شته‌ها شیره خام می‌خورند.", e: "قند دوست دارند." },
            { t: "کود زیستی شامل باکتری‌های مفید است.", f: "کود زیستی مواد شیمیایی است.", e: "میکروب." },
            { t: "فرسایش خاک با پوشش گیاهی کم می‌شود.", f: "شخم زدن زیاد خاک را حفظ می‌کند.", e: "فرسایش." },
            { t: "گیاهان حشره‌خوار در خاک فقیر از نیتروژن می‌رویند.", f: "گیاهان حشره‌خوار فتوسنتز نمی‌کنند.", e: "فتوسنتز دارند، شکار برای نیتروژن." },
            { t: "گیاه سس انگل است.", f: "گیاه سس همزیست است.", e: "ریشه مکنده دارد." },
            { t: "گیاه توبره‌واش حشره‌خوار است.", f: "گیاه توبره‌واش انگل است.", e: "شکارچی." },
            { t: "دیواره آوند چوبی لیگنین دارد.", f: "دیواره آوند آبکش لیگنین ضخیم دارد.", e: "چوب." },
            { t: "عنصر آوندی در دو انتها باز است.", f: "تراکئید در دو انتها باز است.", e: "تراکئید باریک و بسته." },
            { t: "حرکت شیره پرورده دو طرفه است.", f: "حرکت شیره خام دو طرفه است.", e: "خام فقط بالا." },
            { t: "پتاسیم در باز و بسته شدن روزنه نقش دارد.", f: "کلسیم در باز و بسته شدن روزنه نقش اصلی دارد.", e: "پمپ پتاسیم." },
            { t: "روزنه‌ها در شب معمولاً بسته‌اند.", f: "روزنه‌ها همیشه باز هستند.", e: "حفظ آب." },
            { t: "گیاهان CAM در شب روزنه باز می‌کنند.", f: "گیاهان CAM در روز روزنه باز می‌کنند.", e: "کاکتوس." },
            { t: "آبسیزیک اسید روزنه را می‌بندد.", f: "آبسیزیک اسید روزنه را باز می‌کند.", e: "تنش خشکی." },
            { t: "تارهای کشنده عمر کوتاهی دارند.", f: "تارهای کشنده چوبی می‌شوند.", e: "ظریف و میرا." },
            { t: "خاک رس آب را خوب نگه می‌دارد.", f: "خاک شن آب را خوب نگه می‌دارد.", e: "شن زهکشی بالا." },
            { t: "گیاخاک (هوموس) حاصل تجزیه بقایا است.", f: "گیاخاک مواد معدنی خالص است.", e: "آلی." },
            { t: "کود شیمیایی سریع اثر می‌کند.", f: "کود آلی سریع اثر می‌کند.", e: "شیمیایی جذب سریع." },
            { t: "چرخه نیتروژن شامل آمونیاک‌سازی است.", f: "چرخه نیتروژن شامل تولید قند است.", e: "نیتروژن." },
            { t: "نیتریفیکاسیون تبدیل آمونیوم به نیترات است.", f: "نیتریفیکاسیون تبدیل نیترات به گاز است.", e: "نیترات‌سازی." },
            { t: "دنیتراتاسیون تولید گاز نیتروژن است.", f: "دنیتراتاسیون جذب نیتروژن است.", e: "برگشت به جو." },
            { t: "فسفر در ATP و غشا وجود دارد.", f: "فسفر فقط در پروتئین است.", e: "فسفولیپید و DNA." },
            { t: "منیزیم در کلروفیل وجود دارد.", f: "آهن در کلروفیل وجود دارد.", e: "هسته کلروفیل Mg." },
            { t: "زردی برگ نشانه کمبود نیتروژن یا منیزیم است.", f: "زردی برگ نشانه زیادی کلسیم است.", e: "کلروز." },
            { t: "آوند آبکش هسته ندارد.", f: "آوند آبکش مرده است.", e: "زنده اما بدون هسته." },
            { t: "صفحات غربالی در آبکش هستند.", f: "صفحات غربالی در چوب هستند.", e: "آبکش." },
            { t: "حرکت آب در آوند چوبی غیرفعال است.", f: "حرکت آب در آوند چوبی با مصرف ATP است.", e: "فیزیکی (تبخیر)." },
            { t: "قطر آوند چوبی از آبکش بیشتر است.", f: "دیواره آوند آبکش ضخیم‌تر است.", e: "چوب لوله آب است." },
            { t: "درون‌پوست لایه داخلی پوست است.", f: "درون‌پوست بخشی از استوانه مرکزی است.", e: "مرز پوست و استوانه." },
            { t: "سلول‌های معبر نوار کاسپاری U شکل ندارند.", f: "سلول‌های معبر نوار کاسپاری کامل دارند.", e: "راه عبور." }
        ];

        // Define Chapters
        const chaptersData = [
            { id: 1, title: "فصل ۱: دنیای زنده", description: "مبانی زیست‌شناسی، مولکول‌های زیستی، ساختار یاخته", color: "from-blue-400 to-blue-600", icon: "🧬", facts: ch1Facts },
            { id: 2, title: "فصل ۲: گوارش و جذب مواد", description: "ساختار لوله گوارش، آنزیم‌ها، جذب و تنوع گوارش", color: "from-orange-400 to-orange-600", icon: "🍔", facts: ch2Facts },
            { id: 3, title: "فصل ۳: تبادلات گازی", description: "دستگاه تنفس انسان، تهویه ششی و تنوع تنفس", color: "from-cyan-400 to-cyan-600", icon: "🫁", facts: ch3Facts },
            { id: 4, title: "فصل ۴: گردش مواد در بدن", description: "قلب، رگ‌ها، خون و گردش مواد در جانوران", color: "from-red-400 to-red-600", icon: "❤️", facts: ch4Facts },
            { id: 5, title: "فصل ۵: تنظیم اسمزی و دفع", description: "کلیه، تشکیل ادرار و تنوع دفع", color: "from-yellow-400 to-yellow-600", icon: "💧", facts: ch5Facts },
            { id: 6, title: "فصل ۶: از یاخته تا گیاه", description: "ویژگی‌های یاخته گیاهی، سامانه‌های بافتی", color: "from-green-400 to-green-600", icon: "🌿", facts: ch6Facts },
            { id: 7, title: "فصل ۷: جذب و انتقال در گیاهان", description: "تغذیه گیاهی، انتقال آب و شیره پرورده", color: "from-emerald-400 to-emerald-600", icon: "🌳", facts: ch7Facts },
        ];

        // --- COMPONENTS ---

        const ChapterCard = ({ chapter, onSelect }) => {
            const qCount = chapter.facts.length * 2;
            return (
                <button 
                    onClick={() => onSelect(chapter.id)}
                    className={`bg-white rounded-xl shadow-md hover:shadow-xl transition-all duration-300 p-6 text-right border-r-4 overflow-hidden relative group bg-gradient-to-br hover:from-slate-50 hover:to-slate-100`}
                    style={{ borderRightColor: 'rgba(0,0,0,0.1)' }} 
                >
                    <div className={`absolute right-0 top-0 bottom-0 w-2 bg-gradient-to-b ${chapter.color}`}></div>
                    <div className="flex justify-between items-start mb-4">
                        <span className="text-4xl bg-slate-100 rounded-full w-16 h-16 flex items-center justify-center group-hover:scale-110 transition-transform">
                            {chapter.icon}
                        </span>
                        <span className="text-xs font-bold bg-slate-200 px-2 py-1 rounded text-slate-600">
                            {qCount} سوال
                        </span>
                    </div>
                    <h3 className="text-lg font-bold mb-2 text-slate-800 group-hover:text-blue-700 transition-colors">
                        {chapter.title}
                    </h3>
                    <p className="text-sm text-slate-500 leading-relaxed">
                        {chapter.description}
                    </p>
                </button>
            );
        };

        const GameRunner = ({ chapter, onExit }) => {
            const [randomizedQuestions, setRandomizedQuestions] = useState([]);
            const [qIndex, setQIndex] = useState(0);
            const [score, setScore] = useState(0);
            const [mistakes, setMistakes] = useState(0);
            const [streak, setStreak] = useState(0);
            const [timeLeft, setTimeLeft] = useState(20);
            const [isFinished, setIsFinished] = useState(false);
            const [showFeedback, setShowFeedback] = useState(false);
            const [lastAnswerCorrect, setLastAnswerCorrect] = useState(false);

            useEffect(() => {
                const questions = generateQuestions(chapter.facts);
                // Shuffle
                for (let i = questions.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [questions[i], questions[j]] = [questions[j], questions[i]];
                }
                setRandomizedQuestions(questions);
            }, [chapter]);

            useEffect(() => {
                if (isFinished || showFeedback || !randomizedQuestions.length) return;
                if (timeLeft === 0) {
                    handleAnswer(null);
                    return;
                }
                const timer = setInterval(() => setTimeLeft(p => p - 1), 1000);
                return () => clearInterval(timer);
            }, [timeLeft, isFinished, showFeedback, randomizedQuestions]);

            const handleAnswer = (userSaysTrue) => {
                if (isFinished) return;
                const currentQ = randomizedQuestions[qIndex];
                
                // Handle Timeout (null) as wrong
                const isCorrect = userSaysTrue === null ? false : (userSaysTrue === currentQ.isTrue);
                
                setLastAnswerCorrect(isCorrect);
                setShowFeedback(true);

                if (isCorrect) {
                    const bonus = Math.ceil(timeLeft / 5) + Math.min(streak * 5, 20);
                    setScore(s => s + 10 + bonus);
                    setStreak(s => s + 1);
                } else {
                    setMistakes(m => m + 1);
                    setStreak(0);
                }
            };

            const nextQuestion = () => {
                setShowFeedback(false);
                setTimeLeft(20);
                if (qIndex + 1 < randomizedQuestions.length) {
                    setQIndex(q => q + 1);
                } else {
                    setIsFinished(true);
                }
            };

            if (!randomizedQuestions.length) return <div className="p-10 text-center text-slate-600">در حال آماده‌سازی سوالات...</div>;

            if (isFinished) {
                return (
                    <div className="bg-white rounded-xl shadow-xl p-8 text-center animate-fade-in max-w-md mx-auto mt-10">
                        <div className="text-6xl mb-4">🏁</div>
                        <h2 className="text-3xl font-black mb-4 text-blue-600">
                            پایان فصل!
                        </h2>
                        <div className="mb-6 space-y-3 text-lg bg-slate-50 p-4 rounded-lg">
                            <p className="text-slate-700 flex justify-between">
                                <span>امتیاز نهایی:</span>
                                <span className="font-bold text-blue-600">{score}</span>
                            </p>
                            <p className="text-slate-700 flex justify-between">
                                <span>تعداد اشتباهات:</span>
                                <span className="font-bold text-red-600">{mistakes}</span>
                            </p>
                            <p className="text-slate-700 flex justify-between">
                                <span>تعداد سوالات:</span>
                                <span className="font-bold text-slate-800">{randomizedQuestions.length}</span>
                            </p>
                        </div>
                        <div className="flex justify-center gap-4">
                            <button onClick={() => {
                                setQIndex(0);
                                setScore(0);
                                setMistakes(0);
                                setStreak(0);
                                setTimeLeft(20);
                                setIsFinished(false);
                                setShowFeedback(false);
                            }} className="bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-lg font-bold transition-colors">تلاش مجدد</button>
                            <button onClick={onExit} className="bg-slate-200 hover:bg-slate-300 text-slate-700 px-6 py-2 rounded-lg font-bold transition-colors">خروج</button>
                        </div>
                    </div>
                );
            }

            const currentQ = randomizedQuestions[qIndex];

            return (
                <div className="bg-white rounded-2xl shadow-xl overflow-hidden max-w-2xl mx-auto relative border border-slate-200 mt-4">
                    {/* Progress */}
                    <div className="h-2 bg-slate-100 w-full">
                        <div className={`h-full transition-all duration-500 bg-blue-500`} style={{ width: `${((qIndex) / randomizedQuestions.length) * 100}%` }}></div>
                    </div>

                    {/* Stats */}
                    <div className="flex justify-between items-center p-4 bg-slate-50 border-b border-slate-100 text-sm md:text-base">
                        <div className="flex gap-2 text-slate-700 bg-white px-3 py-1 rounded-full shadow-sm"><span className="text-red-500">✖</span> <span className="font-bold">{mistakes}</span></div>
                        <div className="font-bold text-xl text-slate-800">{score}</div>
                        <div className="flex gap-2 bg-white px-3 py-1 rounded-full shadow-sm"><span className="text-orange-500">🔥</span> <span className="font-bold">{streak}</span></div>
                    </div>

                    {/* Question Area */}
                    <div className="p-6 md:p-8 text-center min-h-[400px] flex flex-col justify-center items-center relative">
                        {!showFeedback && (
                            <div className={`absolute top-4 right-4 w-12 h-12 rounded-full border-4 flex items-center justify-center font-bold text-sm transition-all ${timeLeft < 6 ? 'border-red-400 text-red-500 scale-110' : 'border-slate-200 text-slate-400'}`}>
                                {timeLeft}
                            </div>
                        )}
                        
                        <h3 className="text-slate-400 text-xs md:text-sm mb-6 font-bold tracking-wide">سوال {qIndex + 1} از {randomizedQuestions.length}</h3>
                        
                        <div className="flex-grow flex items-center justify-center w-full mb-8">
                            <p className="text-xl md:text-2xl font-bold text-slate-800 leading-relaxed rtl" style={{direction: 'rtl'}}>
                                {currentQ.text}
                            </p>
                        </div>

                        {!showFeedback ? (
                            <div className="flex gap-4 w-full justify-center max-w-md mx-auto">
                                <button onClick={() => handleAnswer(true)} className="flex-1 bg-green-500 hover:bg-green-600 text-white py-4 rounded-xl font-bold text-lg shadow-lg shadow-green-200 transition-transform active:scale-95 flex items-center justify-center gap-2">
                                    <span>صحیح</span> <span>✅</span>
                                </button>
                                <button onClick={() => handleAnswer(false)} className="flex-1 bg-red-500 hover:bg-red-600 text-white py-4 rounded-xl font-bold text-lg shadow-lg shadow-red-200 transition-transform active:scale-95 flex items-center justify-center gap-2">
                                    <span>غلط</span> <span>❌</span>
                                </button>
                            </div>
                        ) : (
                            <div className="absolute inset-0 bg-white/95 backdrop-blur-sm flex flex-col items-center justify-center p-6 animate-fade-in z-20 rounded-2xl">
                                <div className={`text-6xl mb-4 transition-transform ${lastAnswerCorrect ? 'scale-110' : 'shake'}`}>
                                    {lastAnswerCorrect ? '🎯' : '❌'}
                                </div>
                                <h3 className={`text-2xl font-black mb-2 ${lastAnswerCorrect ? 'text-green-600' : 'text-red-600'}`}>
                                    {lastAnswerCorrect ? 'آفرین!' : 'اشتباه شد!'}
                                </h3>
                                <div className="bg-slate-50 p-4 rounded-xl border border-slate-200 w-full max-w-md mb-6 shadow-sm">
                                    <span className="font-bold block mb-2 text-slate-800 text-sm uppercase tracking-wider border-b border-slate-200 pb-2">نکته آموزشی</span>
                                    <p className="text-slate-600 text-lg leading-relaxed">
                                        {currentQ.explanation}
                                    </p>
                                </div>
                                <button onClick={nextQuestion} className="bg-blue-600 hover:bg-blue-700 text-white px-10 py-3 rounded-xl font-bold shadow-lg shadow-blue-200 transition-transform hover:-translate-y-1 active:translate-y-0">
                                    سوال بعدی
                                </button>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        const App = () => {
            const [activeChapterId, setActiveChapterId] = useState(null);
            const activeChapter = chaptersData.find(c => c.id === activeChapterId);

            return (
                <div className="min-h-screen flex flex-col bg-[#f8fafc] bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]">
                    <header className="bg-white shadow-sm p-4 sticky top-0 z-50 border-b border-slate-200">
                        <div className="max-w-5xl mx-auto flex justify-between items-center">
                            <h1 className="text-xl md:text-2xl font-black text-slate-800 flex items-center gap-2">
                                <span className="text-2xl">🧬</span> زیست دهم - چالش نکته‌ها
                            </h1>
                            {activeChapterId && (
                                <button onClick={() => setActiveChapterId(null)} className="text-sm bg-slate-100 hover:bg-slate-200 text-slate-600 px-4 py-2 rounded-full font-bold transition-colors flex items-center gap-1">
                                    <span>🏠</span> خانه
                                </button>
                            )}
                        </div>
                    </header>

                    <main className="flex-grow p-4 md:p-6">
                        <div className="max-w-5xl mx-auto">
                            {!activeChapterId ? (
                                <div className="animate-fade-in">
                                    <div className="mb-10 text-center max-w-2xl mx-auto">
                                        <h2 className="text-3xl font-black mb-4 text-slate-800">فصل مورد نظر را انتخاب کنید</h2>
                                        <p className="text-slate-500 text-lg">جملات کتاب درسی با تغییرات بسیار ریز! آیا می‌توانید جملات غلط را پیدا کنید؟</p>
                                    </div>
                                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                        {chaptersData.map(chapter => (
                                            <ChapterCard key={chapter.id} chapter={chapter} onSelect={setActiveChapterId} />
                                        ))}
                                    </div>
                                </div>
                            ) : (
                                <GameRunner chapter={activeChapter} onExit={() => setActiveChapterId(null)} />
                            )}
                        </div>
                    </main>

                    <footer className="bg-white border-t border-slate-200 text-slate-400 p-6 text-center text-sm mt-auto">
                        <p>طراحی شده برای تسلط بر متن کتاب درسی زیست‌شناسی دهم</p>
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
